---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.AKA2JBranding:custom_organization.yml
---
metadata:
  title: |
    Ask the court for a child custody or Parenting Plan order
  short title: |
    Starting a child custody case action plan
  authors:
    - Caroline Robinson
---
mandatory: True
comment: |
  Global interview metadata
variable name: interview_metadata["Starting_Child_Custody_Action_Plan"]
data:
  al_weaver_version: "1.8.0"
  generated on: "2023-03-14"
  title: >-
    Ask the court for a child custody or Parenting Plan order
  short title: >-
    Starting a child custody case action plan
  description: |-
    An Action Plan to help with steps to ask the court for a custody order
  allowed courts: []
  categories: []
  typical role: "plaintiff"
  generate download screen: True
---
code: |
  interview_metadata['main_interview_key'] =  'Starting_Child_Custody_Action_Plan'
---
code: |
  # This controls the default country and list of states in address field questions
  AL_DEFAULT_COUNTRY = "US"
---
code: |
  # This controls the default state in address field questions
  AL_DEFAULT_STATE = "AK"
---
code: |
  github_repo_name =  'docassemble-StartingChildCustodyActionPlan'
---
code: |
  interview_short_title = "Ask the court for a child custody or Parenting Plan ordery action plan"
---
code: |
  al_form_type = "other" 
---
objects:
  - users: ALPeopleList.using(ask_number=True,target_number=1)
---
sections:
  - review_Starting_Child_Custody_Action_Plan: Review your answers
---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_Starting_Child_Custody_Action_Plan
code: |
  # Set the allowed courts for this interview
  allowed_courts = interview_metadata["Starting_Child_Custody_Action_Plan"]["allowed courts"]
  nav.set_section("review_Starting_Child_Custody_Action_Plan")
  user_role = "plaintiff"
  user_ask_role = "plaintiff"
  Asking_the_court_for_a_custody_order
  Does_AK_have_jurisdiction
  alternate_service
  set_progress(20)
  paternity
  Default
  parents_agree
  set_progress(40)
  domestic_violence
  serve
  interview_order_Starting_Child_Custody_Action_Plan = True
---
###################### Main order ######################
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
mandatory: True
code: |
  al_intro_screen
  Starting_Child_Custody_Action_Plan_intro
  interview_order_Starting_Child_Custody_Action_Plan
  signature_date
  # Store anonymous data for analytics / statistics
  store_variables_snapshot(
      persistent=True,
      data={
          "zip": showifdef("users[0].address.zip"),
          "reached_interview_end": True,
      },
  )
  Starting_Child_Custody_Action_Plan_download
---
comment: |
  This question is used to introduce your interview. Please customize
id: Ask_the_court_for_a_child_custody_or_Parenting_Plan_order
continue button field: Starting_Child_Custody_Action_Plan_intro
question: |
  Ask the court for a child custody or Parenting Plan order
subquestion: |
  This Guided Assistant asks you questions and uses your answers to build a Personal Action Plan - a list of steps to help you with asking the court to change your Custody and Parenting Plan in Alaska.
---
id: Asking the court for a custody order
question: |
  Asking the court for a custody order
subquestion: |
  What do you want to do?
continue button field: Asking_the_court_for_a_custody_order
---
id: Does AK have jurisdiction
question: |
  Does AK have jurisdiction?
subquestion: |
  somehow missed this variable in the template - add in later
continue button field: Does_AK_have_jurisdiction
---
id: Do you know where the other parent is
question: |
  Do you know where the other parent is?
fields:
  - "Alternate service": alternate_service
---
id: Paternity
question: |
  Paternity
subquestion: |
  Sometimes paternity is an issue in a custody case.  Establishing paternity means legally determining the biological father of a child. Once established, the father's name can be placed on the child's birth certificate and he has legal and financial responsibility for the child. Disestablishing paternity is legally un-naming a man as the child's biological father.  Do you want your Action Plan to include information about paternity?
fields:
  - "Paternity": paternity
---
id: Default
question: |
  Default
subquestion: |
  To start your case, you need to file a complaint with the court and send copies to the other parent.
  The other parent has 20 days to file a written response. Their response is their Answer.
  You start your case by filing documents with the court and sending them to the other parent, who has 20 days to file a written response, called an Answer.
  
  If the other parent does not file an their Answer within 20 days, you can ask the judge for a “default judgment.”  If you get a default judgment,This means the case could can move ahead forward. The without the other parent does not need to be there ‘s participation and the court judge may order what the custody arrangement you asked for.  
  
  
  Do you want your Action Plan to include information about Filing for Default what to do if the other parent does not file an their Answer within 20 days?
continue button field: Default
---
id: Do you and the other parent agree
question: |
  Do you and the other parent agree?
subquestion: |
  If you and the other parent agree on everything (a parenting plan including decision-making and schedule, paternity, and child support), you can fill out forms to start the case together.  If not, you can start the case on your own.  Which forms do you want to use?
fields:
  - "Parents agree": parents_agree
  - "Read drpo": read_drpo
---
id: Domestic violence
question: |
  Domestic violence?
subquestion: |
  : If there is abuse or domestic violence between you and the other parent it may affect your case and what you can agree to in your parenting plan.
  
  Do you want your Action Plan to include information about how domestic violence affects your case?
fields:
  - "Domestic violence": domestic_violence
---
id: Catch all screen for these variables
question: |
  Catch all screen for these variables
subquestion: |
  somehow these got missed - need to move them to different screens
fields:
  - "Serve": serve
  - "Contested complaint": contested_complaint
  - "Agree": agree
  - "Contested": contested
  - "User need": user_need
  - "File": file
---
id: preview Starting_Child_Custody_Action_Plan
question: |
  Preview your form before you sign it
subquestion: |
  Here is a preview of the form you will sign on the next page.   
  
  ${ al_recipient_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Edit answers" button
  to edit your answers.

  ${ action_button_html(url_action('review_Starting_Child_Custody_Action_Plan'), label='Edit answers', color='info') }
  
  Remember to come back to this window to continue and sign your form.
continue button field: Starting_Child_Custody_Action_Plan_preview_question    
---
code: |
  signature_fields = []
---
id: Starting Child Custody Action Plan review screen
event: review_Starting_Child_Custody_Action_Plan
question: |
  Review your answers
review:
  - Edit: domestic_violence
    button: |
      **Domestic violence**:
      ${ domestic_violence }
  - Edit: serve
    button: |
      **Serve**:
      ${ serve }
  - Edit: parents_agree
    button: |
      **Parents agree**:
      ${ parents_agree }
  - Edit: contested_complaint
    button: |
      **Contested complaint**:
      ${ contested_complaint }
  - Edit: agree
    button: |
      **Agree**:
      ${ agree }
  - Edit: contested
    button: |
      **Contested**:
      ${ contested }
  - Edit: user_need
    button: |
      **User need**:
      ${ user_need }
  - Edit: file
    button: |
      **File**:
      ${ file }
  - Edit: paternity
    button: |
      **Paternity**:
      ${ paternity }
  - Edit: alternate_service
    button: |
      **Alternate service**:
      ${ alternate_service }
  - Edit: read_drpo
    button: |
      **Read drpo**:
      ${ read_drpo }
---
id: download Starting_Child_Custody_Action_Plan
event: Starting_Child_Custody_Action_Plan_download
question: |
  All done
subquestion: |
  Thank you ${users}. Your form is ready to download and deliver.
  
  View, download and send your form below. Click the "Edit answers" button to fix any mistakes.

  ${ action_button_html(url_action('review_Starting_Child_Custody_Action_Plan'), label='Edit answers', color='info') }
  
  
  ${ al_user_bundle.download_list_html() }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=True) }

progress: 100
---
# ALDocument objects specify the metadata for each template
objects:
  - Starting_Child_Custody_Action_Plan_Post_interview_instructions: ALDocument.using(title="Instructions", filename="Starting_Child_Custody_Action_Plan_next_steps.docx", enabled=True, has_addendum=False)
  - Starting_Child_Custody_Action_Plan_attachment: ALDocument.using(title="Ask the court for a child custody or Parenting Plan order", filename="Starting_Child_Custody_Action_Plan", enabled=True, has_addendum=False, )
---
# Bundles group the ALDocuments into separate downloads, such as for court and for the user
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[Starting_Child_Custody_Action_Plan_Post_interview_instructions, Starting_Child_Custody_Action_Plan_attachment], filename="Starting_Child_Custody_Action_Plan", title="All forms to download for your records", enabled=True)
  - al_recipient_bundle: ALDocumentBundle.using(elements=[Starting_Child_Custody_Action_Plan_attachment],  filename="Starting_Child_Custody_Action_Plan", title="All forms to file", enabled=True)
---
# Each attachment defines a key in an ALDocument. We use `i` as the placeholder here so the same template is 
# used for "preview" and "final" keys, and logic in the template checks the value of 
# `i` to show or hide the user's signature
attachment:
  name: Post-interview-Instructions
  filename: Starting_Child_Custody_Action_Plan_next_steps
  docx template file: Starting_Child_Custody_Action_Plan_next_steps.docx
  variable name: Starting_Child_Custody_Action_Plan_Post_interview_instructions[i]
  skip undefined: True
---
attachment:
  name: Starting Child Custody Action Plan
  filename: Starting_Child_Custody_Action_Plan
  variable name: Starting_Child_Custody_Action_Plan_attachment[i]
  skip undefined: True
  docx template file: Starting_Child_Custody_Action_Plan.docx


